{% extends 'layout.html' %}

{% block content %}
  <div class="bg-white rounded-lg shadow-lg overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-200">
      <h2 class="text-2xl font-bold text-gray-900">ğŸ† ê²½ë§¤ ê²°ê³¼ ëª©ë¡</h2>
      <p class="mt-1 text-sm text-gray-600">ì™„ë£Œëœ ê²½ë§¤ì™€ ë‚™ì°° ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
    </div>
    
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìƒí’ˆëª…</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‚¬ì§„</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‹œì‘ê°€</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìµœê³  ì…ì°°ê°€</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìƒíƒœ</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ë“±ë¡ì¼</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          {% for good in goods %}
            <tr class="hover:bg-gray-50 transition duration-150">
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900">{{good.name}}</div>
                <div class="text-xs text-gray-500">ë“±ë¡ì: {{good.Owner.nick}}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex-shrink-0 h-20 w-20">
                  <img class="h-20 w-20 rounded-lg object-cover border border-gray-200" 
                       src="/img/{{good.img}}" 
                       onerror="this.src='/default-image.svg'; this.onerror=null;" 
                       alt="{{good.name}}">
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900">{{good.price}}ì›</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                {% if good.highestBid %}
                  <div class="text-sm font-bold text-blue-600">{{good.highestBid.bid}}ì›</div>
                  <div class="text-xs text-gray-500">ì…ì°°ì: {{good.highestBid.User.nick}}</div>
                {% else %}
                  <div class="text-sm text-gray-400">ì…ì°° ì—†ìŒ</div>
                {% endif %}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                {% if good.status == 'sold' %}
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                    <svg class="w-2 h-2 mr-1.5" fill="currentColor" viewBox="0 0 8 8">
                      <circle cx="4" cy="4" r="3"></circle>
                    </svg>
                    ë‚™ì°° ì™„ë£Œ
                  </span>
                  <div class="text-xs text-gray-500 mt-1">ë‚™ì°°ì: {{good.Winner.nick}}</div>
                {% elif good.status == 'ended_no_winner' %}
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                    <svg class="w-2 h-2 mr-1.5" fill="currentColor" viewBox="0 0 8 8">
                      <circle cx="4" cy="4" r="3"></circle>
                    </svg>
                    ë‚™ì°° ëŒ€ê¸°
                  </span>
                {% else %}
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                    <svg class="w-2 h-2 mr-1.5" fill="currentColor" viewBox="0 0 8 8">
                      <circle cx="4" cy="4" r="3"></circle>
                    </svg>
                    ì…ì°° ì—†ìŒ
                  </span>
                {% endif %}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900">{{good.createdAt.toLocaleDateString('ko-KR')}}</div>
                <div class="text-xs text-gray-500">{{good.createdAt.toLocaleTimeString('ko-KR')}}</div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    
    {% if goods|length == 0 %}
      <div class="text-center py-12">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900">ì¢…ë£Œëœ ê²½ë§¤ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
        <p class="mt-1 text-sm text-gray-500">ê²½ë§¤ì— ì°¸ì—¬í•´ë³´ì„¸ìš”!</p>
      </div>
    {% endif %}
  </div>
{% endblock %}
